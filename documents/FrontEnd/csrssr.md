## CSR vs SSR

- **SPA(Single Page Application)** <br/>
  React, Vue, Angular 등이 SPA 프레임워크에 해당한다. <br/>
  SPA는 JS가 동작하면서 데이터를 주고받는데, 과거의 웹사이트처럼 rendering에 필요한 모든 정보를 받아오지 않고 <br/>
  필요한 정보만 요청 후 변화된 부분만 rendering되므로 빠른 interaction이 가능하다.

### CSR (Client Side Rendering)

CSR은 서버로부터 받은 초기 HTML 및 JavaScript 파일을 사용하여 웹페이지를 렌더링하는것이 아니라, <br/>
대부분의 렌더링 작업을 클라이언트(브라우저)에서 처리한다. <br/>
<u>사용자가 웹페이지에 접속하면 빈 페이지가 먼저 로드되고, 그 후에 데이터를 서버로부터 받아와 동적으로 렌더링한다.</u>

CSR - 웹페이지 로딩 과정

1. **사용자 요청**: 사용자가 웹페이지에서 접속함. => 유저가 웹사이트 요청 보냄
2. **초기 HTML 및 JavaScript 다운로드** : 서버로부터 초기 HTML 및 JavaScript 다운로드됨.
3. **JavaScript 실행** : 다운로드된 JavaScript 파일이 실행됨.
4. **데이터 요청** : JavaScript는 필요한 데이터를 서버로부터 요청함. HTTP 통신 API가 호출됨.
5. **데이터 응답** : 서버는 요청된 데이터를 처리하고 응답함. 일반적으로 JSON or XML 형식으로 전달됨
6. **데이터 처리 및 렌더링** : 클라이언트(브라우저)는 받은 데이터를 사용하여 페이지를 동적으로 렌더링함. 이 과정에는 DOM 조작과 업데이트가 포함됨
7. **화면 렌더링** : 렌더링된 화면이 사용자에게 보여짐.

서버에서 처리 없이 클라이언트로 보내주기 때문에 _자바스크립트가 모두 다운로드 되고 실행이 끝나기 전까지 사용자는 데이터를 볼 수 없다._

2 ~ 6번까지 과정이 SPA 프레임워크가 실행되어 수행되는 부분으로 볼 수 있다.

- **장점**

1. 페이지 전체를 요청하지 않고, 유저 행동에 따라 변화된 부분만 리렌더링이 진행되기 때문에 SSR보다 빠른 interaction이 가능함.
2. 페이지 내에서 바로 필요하지 않은 데이터는 로딩하지 않고 필요한 시점에 로딩하는 Lazy Loading이 지원됨.

- **단점**

1. 초기 로딩이 오래 걸릴 수 있음.
   long TTV(Time To View) , short TTI(Time To Interaction)
2. SEO 문제 - 요청이 전달되기 전까지 body가 비어있기 때문에 SEO가 효율적으로 동작하지 않아 검색 노출 면에서 불리함.

### SSR(Server Side Rendering)

SSR은 서버 측에서 초기 HTML을 생성하여 클라이언트(브라우저)에 전송하는 방식입니다. <br/>
CSR과 달리 서버에서 HTML을 생성하기 때문에 <u>클라이언트 측에서 JavaScript 파일을 다운로드하고 실행하기 전에 화면을 구성할 수 있습니다.</u>

SSR - 웹페이지 로딩 과정

1. **사용자 요청** : 사용자가 웹페이지 접속 => 유저가 웹사이트 요청 보냄
2. **서버에서 HTML 생성** : 서버에서 사용자 요청에 따라 초기 HTML을 생성. 즉시 렌더링 가능한 HTML파일을 만듦.
3. **HTML 전송** : 생성된 HTML을 클라이언트에 전송
4. **HTML 수신 및 렌더링** : 클라이언트(브라우저)는 서버로부터 받은 HTML을 받아 렌더링. JavaScript 다운로드 전이라 조작할 수는 없음.
5. **JavaScript 파일 다운로드 및 실행** : HTML이 렌더링된 후에도 필요한 경우 추가적인 JavaScript 파일을 다운로드하고 실행하여 페이지의 동적인 부분을 화면에 추가 또는 업데이트할 수 있다.

- 다운 받는 동안 컨텐츠는 볼 수 있지만 조작은 불가능하기에 사용자 조작을 기억하고 JS파일이 실행되면 기억하던 사용자 조작을 수행하며 상호작용한다.

_서버에서 이미 ‘렌더 가능한’ 상태로 클라이언트에 전달되기 때문에, JS가 다운로드 되는 동안 사용자는 데이터를 보고 있을 수 있다._

- **장점**

1. 초기 로딩이 빠르다.
2. HTML의 body에 content가 담겨있기 때문에 CSR보다 SEO에 적합하다.

- **단점**

1. 모든 요청에 대해 필요한 부분만 렌더링하는게 아니라, 완전히 새로 render하게 된다.
2. 서버 과부화가 발생할 수 있다.
3. 로딩이 빠르지만 interaction을 못하는 경우가 발생할 수 있다. - short TTV, long TTI

<!-- #### SPA에서 SSR이 필요한 이유
* CSR에서 HTML의 형태는 body가 비어있는 상태이므로 SEO 최적화가 어렵다는 문제가 있는데, SSR(Next.js)을 적용하여 이를 해결할 수 있기 때문이다.
* 유저들을 위한 성능적 이점을 얻을 수 있다. -->

<!-- TTI : Time To Interaction - 페이지가 상호작용 가능하게 될 때까지의 시간 (이벤트 발생 등)
FCP : First Contents Paint - 픽셀이 처음으로 사용자에게 표시되는 시점. -->
